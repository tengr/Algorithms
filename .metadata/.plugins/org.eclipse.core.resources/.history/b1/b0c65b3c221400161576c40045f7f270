package GoogleCodeJam;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.Scanner;
public class Solution {
	static HashMap<String, Integer> dic;
	Trie trie = new Trie();
	static{
		dic = new HashMap<>();
    	dic.put("ONE", 1);
    	dic.put("TWO", 1);
    	dic.put("THREE", 3);
    	dic.put("FOUR", 4);
    	dic.put("FIVE", 5);
    	dic.put("SIX", 6);
    	dic.put("SEVEN", 7);
    	dic.put("EIGHT", 8);
    	dic.put("NINE", 9);
	}
	
    class TrieNode{
        TrieNode[] children;
        boolean isWord;
        public TrieNode() {
            children = new TrieNode[27];
            isWord = false;
        }
        public void insert(String s) {
            if (s.length() == 0) {isWord = true; return;}
            char first = s.charAt(0);
            if (children[first-'A'] == null) children[first-'A'] = new TrieNode();
            children[first-'A'].insert(s.substring(1));
        }
        
        public boolean[] search(String s) {
            boolean[] ret  = new boolean[2];
            if(s.length() == 0) {
                ret[0] = true;
                ret[1] = isWord;
                return ret;
            }
            char first = s.charAt(0);
            if(children[first-'A'] != null) return children[first-'A'].search(s.substring(1));
            else return ret;
        }
        
    }
    class Trie{
        TrieNode root;
        public Trie(){
            root = new TrieNode();
        }
        public void insert(String s) {
            root.insert(s);
        }
        public boolean[] search(String s){
            return root.search(s);
        }
    }
 
    
    public static void main(String[] args) {
    	Solution ins = new Solution();
    	//Scanner sc = new Scanner(System.in);
    	//String input = sc.nextLine();
    	for(String s : dic.keySet()) ins.trie.insert(s);
    	String input = "ETHER";
    	if(trie == null) System.out.println("trie is null");
    	if(dic == null) System.out.println("");
    	ins.find(dic, ins.trie, input);
    }
    
    public void find(HashMap<String, Integer> dic, Trie trie, String input) {
    	ArrayList<Integer>nums = new ArrayList<Integer>();
    	dfs(trie, "", "", nums, input.toCharArray());
    	for(Integer num : nums) System.out.print(num + " ");
    }
    
    public void dfs(Trie trie, String prefix, String res, ArrayList<Integer> nums, char[] message){
    	if(prefix.length() == message.length) return;
    	for(int i = 0; i < message.length; i++) {
    		char tempChar = message[i];
    		if(tempChar == (char)'Z' + 1) continue;
    		String temp = prefix + tempChar;
    		boolean[] searchRes = trie.search(temp);
    		if(!searchRes[0]) continue;
    		else if(searchRes[1]) {
    			if(nums.isEmpty()){
    				nums.add(dic.get(temp));
    				message[i] = (char)'Z' + 1;
    				dfs(trie, "", res, nums, message);
    				nums.remove(nums.size() - 1);
    				message[i] = tempChar;
    			}
    			else if(dic.get(temp) > nums.get(nums.size() - 1)) continue;   			
    		}

    	}
    }
    
    
}