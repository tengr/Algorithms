package AustrianLotto;
import java.util.ArrayList;

//this is a utility class for parsing input
public class InputParser {
	public static Data parse(String s) {
		ArrayList<Integer> numbers = new ArrayList<Integer>();
		addAllNumbers(s, numbers);
		System.out.println(s);
		System.out.println(numbers);
		String draw = subListToString(numbers,0, AustrianLotto.NUM_DRAWS);
		if(s.indexOf("{", s.indexOf("{")) < 0) { //no result array present
			String[] picks = subListToStringArray(numbers, AustrianLotto.NUM_DRAWS, numbers.size());
			return new Data(draw, picks);
		}
		else{
			String[] picks = subListToStringArray(numbers, AustrianLotto.NUM_DRAWS, numbers.size() - AustrianLotto.NUM_DRAWS - 1);
			int[] ret = new int[AustrianLotto.NUM_DRAWS + 1];
			int idx = 0;
			for(idx = ret.length - 1; idx >= 0; idx--) ret[i] = numbers.get(i);
			return new Data(draw, picks, ret);
		}
	}
	
	private static void addAllNumbers(String s, ArrayList<Integer> numbers) {
		int num = -1;
		for(char c : s.toCharArray()){
			if(c <= '9' && c >= '0') {
				if(num == -1) num = c - '0';
				else num = num * 10 + (c - '0');
			}
			else {
				if(num != -1) numbers.add(num);
				num = -1;
			}
		}
	}

	private static String subListToString(ArrayList<Integer> numbers, int start, int end) {
		StringBuilder sb = new StringBuilder();
		for(int i = start; i < end; i++) {
			sb.append(numbers.get(i) + " ");
		}
		return sb.toString().trim();
	}
	private static String[] subListToStringArray(ArrayList<Integer> numbers, int start, int end) {
		String[] picks = new String[end - start];
		for(int i = 0; i < picks.length; i++) {
			picks[i] = String.valueOf(numbers.get(start + i));
		}
		return picks;
	}

}